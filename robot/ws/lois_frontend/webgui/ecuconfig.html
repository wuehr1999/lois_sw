<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<link rel="icon" href="resources/jecc.png" type="image/png">
<style>
body
{ 
  font-family: arial, sans-serif;
}

table {
  font-family: arial, sans-serif;
  border-collapse: collapse;
  width: 100%;
}

td, th {
  border: 1px solid #dddddd;
  text-align: left;
  padding: 8px;
}

tr:nth-child(even) {
  background-color: #dddddd;
}
</style>
<title>ECU</title>
</head>
        <script src = "javascript/jquery.js" tpye = "text/javascript"></script>
        <script src = "javascript/ecu.js" type = "text/javascript"></script>
        <script src = "javascript/eventemitter.js" type = "text/javascript"></script>
        <script src = "javascript/roslib.js" type = "text/javascript"></script>
        <script language="javascript" type = "text/javascript">
            init();
            console.log("init");
        </script>
<body>

<h2>ECU Parameters</h2>
<table>
  <tr>
    <th>Parameter</th>
    <th>Value</th>
    <th>Encoding</th>
  </tr>
  <tr>
    <th>Modes</th>
  </tr>
  <tr>
    <td>Terminal Mode</td>
    <td><input id = "terminal_mode" value = 0></td>
    <td>0: default, 1: UART1, 2: UART2, 3: Virtual Comport, 4: disable checksum</td>
  </tr>
  <tr>
    <td>Enable rpm control</td>
    <td><input id = "rpmctrl_enable" value = 2></td>
    <td>0: disable, 1: enable</td>
  </tr>
  <tr>
    <td>RPM Lowpass filter</td>
    <td><input id = "rpm_lowpass" value = 0></td>
    <td>coeff setpoint = (1 - coeff) * setpoint_old + coeff * setpoint</td>
  </tr>
  <tr>
    <th>Left motor rpm control</th>
  </tr>
  <tr>
    <td>Ka</td>
    <td><input id = "ka_left"  value = 1.0></td>
    <td>-</td>
  </tr>
  <tr>
    <td>Kp</td>
    <td><input id = "kp_left"  value = 1.0></td>
    <td>-</td>
  </tr>
    <td>Tn</td>
    <td><input id = "tn_left" value = 1.0></td>
    <td>-</td>
  </tr>
    <td >Td</td>
    <td><input id = "td_left" value = 1.0></td>
    <td>-</td>
  </tr>
  <tr>
    <td>Timing correction factor short</td>
    <td><input id = "corr_short_left" value = 1.0></td>
    <td>-</td>
  </tr>
  <tr>
    <td>Timing correction factor long</td>
    <td><input id = "corr_long_left" value = 1.0></td>
    <td>-</td>
  </tr>
  <tr>
    <th>Right motor rpm control</th>
  </tr>
  <tr>
    <td>Ka</td>
    <td><input id = "ka_right"  value = 1.0></td>
    <td>-</td>
  </tr>
  <tr>
    <td>Kp</td>
    <td><input id = "kp_right"  value = 1.0></td>
    <td>-</td>
  </tr>
    <td>Tn</td>
    <td><input id = "tn_right" value = 1.0></td>
    <td>-</td>
  </tr>
    <td>Td</td>
    <td><input id = "td_right" value = 1.0></td>
    <td>-</td>
  </tr>
  <tr>
    <td>Timing correction factor short</td>
    <td><input id = "corr_short_right" value = 1.0></td>
    <td>-</td>
  </tr>
  <tr>
    <td>Timing correction factor long</td>
    <td><input id = "corr_long_right" value = 1.0></td>
    <td>-</td>
  </tr>
  <tr>
    <th>Periodics 0xfffe (65534): read once, 0xffff (65535): off</th>
  </tr>
  <tr>
    <td>Latitude/ Longitude</td>
    <td><input id = "period_latlon" value = 500></td>
    <td>ms</td>
  </tr>
  <tr>
    <td>Time</td>
    <td><input id = "period_time" value = 500></td>
    <td>ms</td>
  </tr>
  <tr>
    <td>Date</td>
    <td><input id = "period_date" value = 500></td>
    <td>ms</td>
  </tr>
  <tr>
    <td>Heading</td>
    <td><input id = "period_heading" value = 500></td>
    <td>ms</td>
  </tr>
  <tr>
    <td>Encoders</td>
    <td><input id = "period_encoders" value = 500></td>
    <td>ms</td>
  </tr>
  <tr>
    <td>Odometry</td>
    <td><input id = "period_odometry" value = 400></td>
    <td>ms</td>
  </tr>
</table>

<button id = "button_load" style = "float: left;" onclick = "button_load_onclick()">Load</button>
<button id = "button_apply" style = "float: left;" onclick = "button_apply_onclick()">Apply</button>
<button id = "button_save" style = "float: right;" onclick = "button_save_onclick()">Save</button>
</body>
</html>

